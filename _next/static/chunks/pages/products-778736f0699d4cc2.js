(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[345],{6029:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/products",function(){return t(5245)}])},5245:function(e,s,t){"use strict";t.r(s),t.d(s,{__N_SSG:function(){return p},default:function(){return g}});var r=t(4246),a=t(8038),i=t.n(a),l=t(9894),n=t.n(l),c=t(7378),d=t(6677),o=t(7833),u=t(7661),m=t(504),x=t(236);let h="https://api.zunmingtea.com";var p=!0;function g(e){let{initialNavigation:s,initialFooter:t}=e,{locale:a}=(0,m.Q)(),l=x.I[a].products,[p,g]=(0,c.useState)([]),[f,v]=(0,c.useState)(!0),[j,N]=(0,c.useState)([]),[y,_]=(0,c.useState)(""),w=(0,d.useRouter)();(0,c.useEffect)(()=>{let e=async()=>{try{let e=((await o.Z.get("".concat(h,"/content/series"),{params:{lang:a}})).data.items||[]).sort((e,s)=>{var t,r;return(null!==(t=e.order)&&void 0!==t?t:0)-(null!==(r=s.order)&&void 0!==r?r:0)});N(e)}catch(e){console.error("Error fetching series:",e),N([])}};(async()=>{try{let e=await o.Z.get("".concat(h,"/content/products"),{params:{lang:a}});g(e.data.items||[])}catch(e){console.error("Error fetching products:",e),g([])}finally{v(!1)}})(),e()},[a]),(0,c.useEffect)(()=>{let{series:e}=w.query;"string"==typeof e&&_(e)},[w.query.series]);let b=y?p.filter(e=>e.series_id===y):p;return(0,r.jsxs)(u.Z,{initialNavigation:s,initialFooter:t,children:[(0,r.jsx)(i(),{children:(0,r.jsxs)("title",{children:[l.title," - 尊茗茶业"]})}),(0,r.jsx)("div",{className:"section-padding bg-gray-50",children:(0,r.jsxs)("div",{className:"container-custom",children:[(0,r.jsx)("h1",{className:"text-display font-bold mb-12 text-center text-primary-800",children:l.title}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-8 flex flex-col md:flex-row md:items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700",children:l.filterLabel||"按系列筛选"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:l.filterHint||"选择一个系列即可只查看该系列产品。"})]}),(0,r.jsxs)("select",{className:"input md:w-80",value:y,onChange:e=>{_(e.target.value);let s=e.target.value?"/products?series=".concat(e.target.value):"/products";w.push(s,void 0,{shallow:!0})},children:[(0,r.jsx)("option",{value:"",children:l.allSeries||"全部系列"}),j.map(e=>(0,r.jsx)("option",{value:e.series_id,children:e.name},e.series_id))]})]}),f?(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("p",{className:"text-gray-600",children:"加载中..."})}):0===b.length?(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("p",{className:"text-gray-600",children:"暂无产品"})}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6",children:b.map(e=>{var s;return(0,r.jsx)(n(),{href:"/products/".concat(e.product_id),children:(0,r.jsxs)("div",{className:"card overflow-hidden cursor-pointer h-full hover:shadow-lg transition-shadow",children:[e.image_url?(0,r.jsx)("div",{className:"aspect-square bg-gray-100 overflow-hidden",children:(0,r.jsx)("img",{src:e.image_url,alt:e.name,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-105"})}):(0,r.jsx)("div",{className:"aspect-square bg-gray-200"}),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("h3",{className:"font-semibold mb-2",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:"string"==typeof e.desc?e.desc.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim():""}),e.series_id&&(0,r.jsxs)("p",{className:"text-xs text-primary-600 mt-2",children:[l.seriesLabel||"系列",":"," ",(null===(s=j.find(s=>s.series_id===e.series_id))||void 0===s?void 0:s.name)||e.series_id]}),e.origin&&(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:[l.origin,": ",e.origin]}),e.type&&(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:[l.type,": ",e.type]})]})]})},e.product_id)})})]})})]})}}},function(e){e.O(0,[271,661,888,774,179],function(){return e(e.s=6029)}),_N_E=e.O()}]);